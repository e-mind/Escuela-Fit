{% extends "base.html" %}
{% load staticfiles %}

{% block title %}Gr√°fica{% endblock title %}

{% block css %}
    <style>
        .wrapper{
            width: 100%;
            height: 100vh;
        }
        #chart-container {
            position: relative;
            width: 80%;
            margin: auto;
        }
    </style>
{% endblock css %}

{% block content %}
    <div class="wrapper">
        <div id="chart-container">
            <canvas id="myChart"></canvas>
        </div>
    </div>
    {% csrf_token %}
{% endblock content %}

{% block javascript %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <script src="{% static 'js/django_ajax.js' %}"></script>
    <script>
        $.ajax({
            url: '{% url 'pase_lista:json_data' %}',
            type: 'GET',
            data: {},
            success: function(json_data) {
                var ctx = document.getElementById('myChart').getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'line',
                    data: json_data,
                    options: {
                        responsive: true, 
                    }
                });
            }
        });
    </script>
{% endblock javascript %}